<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <title>Drupal 8 Routing Tricks for Better Admin URLs | ThinkShout</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, minimum-scale=0.5 maximum-scale=1.0">
  <meta name="format-detection" content="telephone=no">

  
  <meta name="description" content="Utilize Drupal 8's routing system for a better admin experience.">

  <!-- Social Media Metatags -->
  
  <meta property="og:image" content="https://thinkshout.com/assets/images/ts_icon.jpg">
  <meta name="twitter:image" content="https://thinkshout.com/assets/images/ts_icon.jpg">
  

  
  <meta name="keywords" content="Drupal, Drupal 8, Drupal Planet, NCYL">

  <!-- Fonts -->
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6630094/7238952/css/fonts.css" />
  <link rel="stylesheet" type="text/css" href="/assets/fonts/MyFontsWebfontsKit.css" />

  <link rel="shortcut icon" href="/assets/images/assets/favicon.ico" type="image/vnd.microsoft.icon" />

  <!-- Normalize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css" media="screen" title="no title" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css?v=2018-06-11.11.49.44" />

  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" title="ThinkShout Feed" href="/rss.xml" />
</head>
<body class="blog-post">

  <!-- Header -->
  <header>
  <div class="container">
    <div class="header-logo">
      <a href="/">
        <img src="/assets/images/ts_redesign/ts-logo-full.png" alt="ThinkShout logo" />
      </a>
    </div>

    <a class="mobile-menu-icon">
      <div>
        <span aria-hidden="false">Menu</span>
      </div>
    </a>

		<nav>
			<ul class="main-menu">
        
          
            <li><a href="/work/">Our Work</a></li>
          
        
          
            <li><a href="/services/">Services</a></li>
          
        
          
            <li><a href="/values/">Values</a></li>
          
        
          
            <li><a href="/team/">Team</a></li>
          
        
          
            <li><a href="/blog/">Blog</a></li>
          
        
          
        
          
        
			</ul>
		</nav>
	</div>
</header>


  <!-- Main Content -->
  <div class="main-content">
      <div class="blog-header">
  

  <p><span class="date">07.20.2016</span>
  
    
      
    
      
    
      
    
      
        <a class="topic" href="/blog/topic/technology">Technology and Innovation</a>
      
    
  
  </p>

  <h1 class="post-title">Drupal 8 Routing Tricks for Better Admin URLs</h1>
  <p class="byline">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <img class="team-photo" src="/assets/images/team/small/dan.jpg">
    
      <a class="team-name" href="/team/dan/">Dan Ruscoe</a>
    <br>
      Senior Software Engineer
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </p>
</div>





<section class="body">
  <p>We recently launched a new case tracker for foster ed youth designed to improve their educational outcomes in partnership with <a href="http://youthlaw.org/">The National Center for Youth Law</a> (NCYL). The web application replaces their existing platform, Goal Book, which lacked the flexibility they needed to meet their requirements. A web application differs from a website in that a website primarily provides <em>content</em> where a web application primarily provides <em>tools</em>.</p>

<p>The project presented us with an opportunity to do extensive custom development with our favorite new platform, Drupal 8. D8’s many developer experience improvements, including standardized object-oriented development methods, allowed us to meet NCYL’s requirements efficiently and with a level of quality that would have been more difficult on Drupal 7. In addition, we were able to accelerate the release of <a href="https://drupal.org/project/redhen">RedHen CRM</a> on <a href="https://www.drupal.org/project/redhen/releases/8.x-1.0-alpha1">Drupal 8</a>, which lives at the heart of the application managing all of the contacts, organizations, and relationships.</p>

<p>To enhance the utility of the application, we made an early decision to customize every URL a user would interact with. As most of the functionality would revolve around nodes, we wanted to make sure we avoided URLs like <code class="highlighter-rouge">/node/256/edit</code> that don’t give the user any indication of which part of the application they’re using.</p>

<h2 id="implementation">Implementation</h2>

<p>If you wanted to customize URLs in Drupal 7, you could use the <a href="https://www.drupal.org/project/pathauto">Pathauto</a> module. You can still do that in Drupal 8, but D8’s routing system can be coaxed into doing something similar. It works on admin pages, too, which was perfect for NCYL’s needs.</p>

<h2 id="overriding-existing-node-paths">Overriding Existing Node Paths</h2>

<p>As an example, let’s say you have a node type specifically for storing information about schools: a School Node. The standard admin path for adding a School Node would be something like this:</p>

<p><code class="highlighter-rouge">/node/add/school</code></p>

<p>But, add a custom module with route configuration and you can have this:</p>

<p><code class="highlighter-rouge">/school/add</code></p>

<p>For simplicity, we’ll call our module <strong>school.module</strong>. The directory structure looks like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>modules/
  school/
    school.module
    school.routing.yml
</code></pre></div></div>

<p>The route configuration sits inside <strong>school.routing.yml</strong> and looks like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">school.add</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/school/add'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\node\Controller\NodeController::add'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Add</span><span class="nv"> </span><span class="s">School'</span>
    <span class="na">node_type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">school'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_node_add_access</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node:school'</span>
</code></pre></div></div>

<p>Line by line:</p>

<p><code class="highlighter-rouge">school.add:</code></p>

<p>This is the name of the route. Route names should be unique and usually start with the name of your module.</p>

<p><code class="highlighter-rouge">path: '/school/add'</code></p>

<p>The path the route points to. This is the part that comes after your site’s base URL.</p>

<p><code class="highlighter-rouge">_controller: '\Drupal\node\Controller\NodeController::add'</code></p>

<p>This tells the route to use the NodeController, provided by the Node module. No need for a custom controller here.</p>

<p><code class="highlighter-rouge">_title: 'Add School'</code></p>

<p>This sets the page title of the node add form.</p>

<p><code class="highlighter-rouge">_node_add_access: 'node:school'</code></p>

<p>This is an access handler that ensures the user has permission to add a node of type “school.”</p>

<p>Providing a custom path to edit School Nodes is even easier:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">school.edit</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/school/{node}/edit'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_entity_form</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node.edit'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">node</span><span class="pi">:</span> <span class="s">\d+</span>
    <span class="na">_entity_access</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node.update'</span>
</code></pre></div></div>

<p>We no longer need to tell the route which controller to use or what type of node we’re using. Drupal 8’s Entity API figures it out using the node ID passed in the URL.</p>

<p>Line by line again:</p>

<p><code class="highlighter-rouge">path: '/school/{node}/edit'</code></p>

<p>The path now contains a placeholder, {node}, which represents the node ID in the URL.</p>

<p><code class="highlighter-rouge">_entity_form: 'node.edit'</code></p>

<p>The form we want to use to edit the node.</p>

<p><code class="highlighter-rouge">node: \d+</code></p>

<p>Some validation to ensure the URL contains the right data type for a node ID. By specifying the regular expression pattern <code class="highlighter-rouge">\d+</code>, we are telling Drupal to only use this route when <code class="highlighter-rouge">{node}</code> is one or more digits. The route will match a URL like /school/32/edit, but will not match /school/lincoln-high/edit.</p>

<p><code class="highlighter-rouge">_entity_access: 'node.update'</code></p>

<p>An access handler, ensuring the user has permission to update this node. No need to specify the node type, as we did when adding a node.</p>

<p>Finally, a route for viewing the node:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">school.view</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/school/{node}'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\node\Controller\NodeViewController::view'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">node</span><span class="pi">:</span> <span class="s">\d+</span>
    <span class="na">_entity_access</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node.view'</span>
</code></pre></div></div>

<p>Very similar to the node edit route, just with a different path and controller.</p>

<p>For a more thorough explanation of routes and route options not covered here, check out the <a href="https://www.drupal.org/node/2092643">official docs</a>.</p>

<h2 id="custom-controllers">Custom Controllers</h2>

<p>What if you want to provide a custom controller for adding a node and still take advantage of Drupal’s permissions system? Routes can do that, too.</p>

<p>Let’s introduce a Teacher Node and an accompanying module.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>modules/
  school/
  teacher/
    src/
      Controller/
        TeacherController.php
    teacher.module
    teacher.routing.yml
</code></pre></div></div>

<p><strong>teacher.routing.yml</strong> looks like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">teacher.add</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/teacher/add'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\teacher\Controller\TeacherController::addTeacher'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Add</span><span class="nv"> </span><span class="s">Teacher'</span>
    <span class="na">node_type</span><span class="pi">:</span> <span class="s1">'</span><span class="s">teacher'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_node_add_access</span><span class="pi">:</span> <span class="s1">'</span><span class="s">node:teacher'</span>
</code></pre></div></div>

<p>Very similar to the route we used to add School Nodes, but with a custom controller.</p>

<p><strong>TeacherController.php</strong> looks like this:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">Drupal\teacher\Controller</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Drupal\node\NodeTypeInterface</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TeacherController</span> <span class="k">extends</span> <span class="nx">ControllerBase</span> <span class="p">{</span>

  <span class="k">public</span> <span class="k">function</span> <span class="nf">addTeacher</span><span class="p">(</span><span class="nx">NodeTypeInterface</span> <span class="nv">$node_type</span><span class="p">)</span> <span class="p">{</span>

  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The <strong>addTeacher</strong> function is where you would add your custom code for adding Teacher Nodes.</p>

<p>That’s how you can use core Drupal 8 functionality to make your Drupal admin pages a little more user friendly.</p>


  
    
      <div class="blog-cta">
        <div class="text">
          <h3>Get In Touch</h3>
          <p><p>Questions? Comments? We want to know! Drop us a line and let’s start talking.</p>
</p>
          <a href="https://thinkshout.com/contact/" class="uppercase-link">Learn More<i class="fa fa-caret-right"></i></a>
        </div>

        
        <div class="image">
          <img src="/assets/images/ts_redesign/cta/portland-waterfront-cta.jpg" alt="Get In Touch">
        </div>
        
      </div>
      

  
    <div class="tags">
      <span class="tag-label">Tags:</span>
      <a class='tag' rel='tag category' title='View all posts tagged Drupal.' href='/blog/category/drupal/'>Drupal</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal 8.' href='/blog/category/drupal-8/'>Drupal 8</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal Planet.' href='/blog/category/drupal-planet/'>Drupal Planet</a> <a class='tag' rel='tag category' title='View all posts tagged NCYL.' href='/blog/category/ncyl/'>NCYL</a>
    </div>
  


  
<div class="comments">
  <div id="disqus_thread"></div>
  <script>
  /**
  * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = 'https://thinkshout.com/blog/2016/07/drupal-8-routing-tricks-for-better-admin-urls/';
    this.page.identifier = '/blog/2016/07/drupal-8-routing-tricks-for-better-admin-urls';
    this.page.title = 'Drupal 8 Routing Tricks for Better Admin URLs'
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//thinkshout.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


</section>

<div class="pagination">
  
    <div class="previous">
      <a href="/blog/2016/07/a-heroic-intro-to-typescript/"><span class="fa fa-caret-left"></span> <span>A Heroic Introduction to TypeScript</span></a>
    </div>
  

  
    <div class="next">
      <a href="/blog/2016/08/your-year-end-plan/"><span>Your Year-End Plan - It's Never Too Early to Start</span> <span class="fa fa-caret-right"></span></a>
    </div>
  
</div>




  <div class="team-member-blog">
    <div class="container">
      <h4>Related Blog Posts</h4>
      <div class="row posts">
        
        
        
        
        
          <div class="post">
  <a href="/blog/2018/05/Space-for-Empathy/">
    <p class="post-date">05.24.2018</p>
    <h3 class="post-title">Space for Empathy</h3>
    <p class="post-short">How do we make space for empathy in our work and in our community? Jules takes us on a deep dive into what she learned at this year's DrupalCon</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/jules.jpg">
      <span class="byline-text">
        <strong>Jules Dickey</strong><br>
        <span class="position">Software Engineer</span>
      </span>
    </p>
  </a>
</div>

          
          
        
        
        
          <div class="post">
  <a href="/blog/2018/05/Making-GDPR-Preparations/">
    <p class="post-date">05.13.2018</p>
    <h3 class="post-title">Preparing for the GDPR</h3>
    <p class="post-short">The European Union’s General Data Protection Regulations go into effect May 25th. Here's how you need to prepare.</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/tauno.jpg">
      <span class="byline-text">
        <strong>Tauno Hogue</strong><br>
        <span class="position">Chief Technology Officer</span>
      </span>
    </p>
  </a>
</div>

          
          
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          <div class="post">
  <a href="/blog/2018/01/Great-hoodie-mystery/">
    <p class="post-date">01.06.2018</p>
    <h3 class="post-title">The Great Hoodie Mystery</h3>
    <p class="post-short">Gabe takes what would otherwise be an inane office exchange and ties it back to data structures.</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/gabe.jpg">
      <span class="byline-text">
        <strong>Gabe Carleton-Barnes</strong><br>
        <span class="position">Director of Engineering</span>
      </span>
    </p>
  </a>
</div>

          
          
            
      </div>
    </div>
  </div>


  </div>

  <!-- Footer -->
  <div class="newsletter-block">
  <div class="container">
    <div class="newsletter-info">
      <h1>Get Our Email Newsletter</h1>
      <p>
        Cutting edge solutions, strategies, and updates from industry
        thought-leaders, delivered right to your inbox.
      </p>

      <form id="mc-embedded-subscribe-form" action="//thinkshout.us1.list-manage.com/subscribe/post?u=2ec82d6db8eeef3d5b33b762e&amp;id=e85720354e" method="post"  name="mc-embedded-subscribe-form" class="validate" target="_blank">
        <input type="email" placeholder="your email address" name="EMAIL" id="mce-EMAIL" required>
        <button type="submit">submit<i class="fa fa-caret-right"></i></button>
      </form>
    </div>
  </div>
</div>

  <footer>
  <div class="container">
  	<nav class="footer-menu">
      <ul class="main-menu-footer">
        
        <li>
          <a href="/work/">Our Work</a>
          
        </li>
        
        <li>
          <a href="/services/">Services</a>
          
            <ul class="footer-submenu">
            
              <li>
                <a href="/services/digital-strategy/">Digital Strategy</a>
              </li>
            
              <li>
                <a href="/services/design/">Design & UX</a>
              </li>
            
              <li>
                <a href="/services/digital-ecosystem/">Digital Ecosystem</a>
              </li>
            
              <li>
                <a href="/services/development/">Development</a>
              </li>
            
            </ul>
          
        </li>
        
        <li>
          <a href="/values/">Values</a>
          
        </li>
        
        <li>
          <a href="/team/">Team</a>
          
        </li>
        
        <li>
          <a href="/blog/">Blog</a>
          
        </li>
        
        <li>
          <a href="/contact/">Connect With Us</a>
          
        </li>
        
        <li>
          <a href="/careers/">Careers</a>
          
        </li>
        
      </ul>
  	</nav>

    <div class="bcorp-logo">
      
      
        
          <a href="https://www.bcorporation.net/community/thinkshout-inc" target="_blank">
            <img src="/assets/images/ts_redesign/bcorp.png" alt="bcorp logo" />
          </a>
        
      
    </div>

    <div class="footer-bottom">
      <div class="social-media">
        <ul>
          
            <li>
              <a href="http://www.facebook.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/facebook.svg" alt="facebook" />
              </a>
            </li>
          
            <li>
              <a href="http://www.twitter.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/twitter.svg" alt="twitter" />
              </a>
            </li>
          
        </ul>
      </div>
      <div class="copyright">
        &copy;2018 ThinkShout, Inc. ThinkShout and the ThinkShout logos are registered trademarks of ThinkShout, Inc.
        
        
          
            <a href="/privacy/">Privacy Policy</a>
          
        
      </div>
    </div>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
	<script src="/assets/js/jquery.waypoints.min.js"></script>
  <script src="/assets/js/jquery.matchHeight.js"></script>
  <script src="/assets/js/chosen.jquery.min.js"></script>
  <script src="/assets/js/script.js"></script>


  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9743130-1', 'auto');
    ga('send', 'pageview');

  </script>

</body>
</html>
