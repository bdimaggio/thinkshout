<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <title>Customize Menu Items in Drupal User Profile | ThinkShout</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, minimum-scale=0.5 maximum-scale=1.0">
  <meta name="format-detection" content="telephone=no">

  
  <meta name="description" content="Learn how to change menu items with a little bit of code.">

  <!-- Social Media Metatags -->
  
  <meta property="og:image" content="http://thinkshout.com/assets/images/ts_icon.jpg">
  <meta name="twitter:image" content="http://thinkshout.com/assets/images/ts_icon.jpg">
  

  
  <meta name="keywords" content="Customize Menus, Drupal, Drupal 7, Drupal Planet, Drupal User Profile">

  <!-- Fonts -->
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6630094/7238952/css/fonts.css" />
  <link rel="stylesheet" type="text/css" href="/assets/fonts/MyFontsWebfontsKit.css" />

  <link rel="shortcut icon" href="/assets/images/assets/favicon.ico" type="image/vnd.microsoft.icon" />

  <!-- Normalize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css" media="screen" title="no title" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css?v=2018-06-11.11.49.44" />

  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" title="ThinkShout Feed" href="/rss.xml" />
</head>
<body class="blog-post">

  <!-- Header -->
  <header>
  <div class="container">
    <div class="header-logo">
      <a href="/">
        <img src="/assets/images/ts_redesign/ts-logo-full.png" alt="ThinkShout logo" />
      </a>
    </div>

    <a class="mobile-menu-icon">
      <div>
        <span aria-hidden="false">Menu</span>
      </div>
    </a>

		<nav>
			<ul class="main-menu">
        
          
            <li><a href="/work/">Our Work</a></li>
          
        
          
            <li><a href="/services/">Services</a></li>
          
        
          
            <li><a href="/values/">Values</a></li>
          
        
          
            <li><a href="/team/">Team</a></li>
          
        
          
            <li><a href="/blog/">Blog</a></li>
          
        
          
        
          
        
			</ul>
		</nav>
	</div>
</header>


  <!-- Main Content -->
  <div class="main-content">
      <div class="blog-header">
  

  <p><span class="date">04.19.2016</span>
  
    
      
    
      
    
      
    
      
        <a class="topic" href="/blog/topic/technology">Technology and Innovation</a>
      
    
  
  </p>

  <h1 class="post-title">Customize Menu Items in Drupal User Profile</h1>
  <p class="byline">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <img class="team-photo" src="/assets/images/team/small/nancy.jpg">
    
      <a class="team-name" href="/team/nancy/">Nancy Rackleff</a>
    <br>
      Senior Software Engineer
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </p>
</div>





<section class="body">
  <p>We were recently asked by a client to edit the user profile view page on their site. This client needed us to move the link to the user’s contact form out of the tab area at the top of the profile and replace it with a link that appears further down in the content of the user’s profile. While this is not something you can do through the admin interface in Drupal 7, it is easy to do with just a few lines of code in a custom module, which I will show you how to do here.</p>

<p>Prior to adding our custom code, the link to the contact form appears as a tab.</p>

<p><img src="/assets/images/blog/custom-menu-1.png" alt="Customize Menu 1" /></p>

<p>The “Contact” menu item starts out as a tab because the Drupal contact module originally creates the menu item and assigns it the type MENU_LOCAL_TASK. (See <a href="https://api.drupal.org/api/drupal/includes!menu.inc/group/menu_item_types/7">Menu item types</a> for a list of the possible menu types and their uses in Drupal.) In order for us to change the type, we can use Drupal’s <a href="https://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_menu_alter/7">hook_menu_alter()</a> function to change the item to the MENU_CALLBACK type, which will remove it from the display, but keep it available as a valid path.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sd">/**
 * Implements hook_menu_alter().
 */</span>
<span class="k">function</span> <span class="nf">mymodule_menu_alter</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$items</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Remove the 'contact' tab.</span>
  <span class="nv">$items</span><span class="p">[</span><span class="s1">'user/%user/contact'</span><span class="p">][</span><span class="s1">'type'</span><span class="p">]</span> <span class="o">=</span> <span class="nx">MENU_CALLBACK</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now it is no longer a tab, but we still need make use of Drupal’s <a href="https://api.drupal.org/api/drupal/modules%21user%21user.api.php/function/hook_user_view_alter/7">hook_user_view_alter()</a> to insert it into the content of the profile before it is rendered on the page.</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="sd">/**
 * Implements hook_user_view_alter().
 */</span>
<span class="k">function</span> <span class="nf">mymodule_user_view_alter</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$build</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Check to see if this user has allowed others to contact him/her.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$build</span><span class="p">[</span><span class="s1">'#account'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">data</span><span class="p">[</span><span class="s1">'contact'</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">// Create the text for the link using the account info to get the user’s first name.</span>
    <span class="nv">$link_text</span> <span class="o">=</span> <span class="nv">$build</span><span class="p">[</span><span class="s1">'#account'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">field_first_name</span><span class="p">[</span><span class="s1">'und'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'safe_value'</span><span class="p">]</span> <span class="o">?</span> <span class="s2">"email "</span>
      <span class="o">.</span> <span class="nv">$build</span><span class="p">[</span><span class="s1">'#account'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">field_first_name</span><span class="p">[</span><span class="s1">'und'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'safe_value'</span><span class="p">]</span> <span class="o">:</span> <span class="s2">"email"</span><span class="p">;</span>
    <span class="c1">// Use the l() function to create the link.</span>
    <span class="nv">$contact_link</span> <span class="o">=</span> <span class="nx">l</span><span class="p">(</span><span class="nv">$link_text</span><span class="p">,</span><span class="s1">'user/'</span> <span class="o">.</span> <span class="nv">$build</span><span class="p">[</span><span class="s1">'#account'</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">uid</span> <span class="o">.</span> <span class="s1">'/contact'</span><span class="p">);</span>
    <span class="c1">// Insert it into the $build array.</span>
    <span class="nv">$build</span><span class="p">[</span><span class="s1">'contact_link'</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">'#markup'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"&lt;div class=</span><span class="se">\"</span><span class="s2">field</span><span class="se">\"</span><span class="s2">&gt;&lt;div class=</span><span class="se">\"</span><span class="s2">field-label</span><span class="se">\"</span><span class="s2">&gt;"</span> 
    <span class="o">.</span> <span class="nx">t</span><span class="p">(</span><span class="s1">'Contact'</span><span class="p">)</span> <span class="o">.</span> <span class="s2">":&amp;nbsp;&lt;/div&gt;&lt;div class=</span><span class="se">\"</span><span class="s2">field-items</span><span class="se">\"</span><span class="s2">&gt;&lt;div class=</span><span class="se">\"</span><span class="s2">field-item even</span><span class="se">\"</span><span class="s2">&gt;"</span>
    <span class="o">.</span> <span class="nv">$contact_link</span> <span class="o">.</span> <span class="s2">"&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"</span><span class="p">;</span>
    <span class="c1">// Insert into the user details that group we created in the display mode in admin interface.</span>
    <span class="nv">$build</span><span class="p">[</span><span class="s1">'#group_children'</span><span class="p">][</span><span class="s1">'contact_link'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'group_user_details'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>After the custom code and a quick cache clear, the tab is gone and there is a link to the form within the body of the profile.</p>

<p><img src="/assets/images/blog/custom-menu-2.png" alt="Customize Menu 2" /></p>

<p>I won’t go into creating a custom module; that’s a bit beyond the scope of this post, but there is a tutorial for <a href="https://www.drupal.org/node/1074360">creating a custom module</a> on drupal.org.</p>

<p>Shout out to Greg Boggs for his assistance!</p>



  
    
      <div class="blog-cta">
        <div class="text">
          <h3>Get In Touch</h3>
          <p><p>Questions? Comments? We want to know! Drop us a line and let’s start talking.</p>
</p>
          <a href="https://thinkshout.com/contact/" class="uppercase-link">Learn More<i class="fa fa-caret-right"></i></a>
        </div>

        
        <div class="image">
          <img src="/assets/images/ts_redesign/cta/portland-waterfront-cta.jpg" alt="Get In Touch">
        </div>
        
      </div>
      

  
    <div class="tags">
      <span class="tag-label">Tags:</span>
      <a class='tag' rel='tag category' title='View all posts tagged Customize Menus.' href='/blog/category/customize-menus/'>Customize Menus</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal.' href='/blog/category/drupal/'>Drupal</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal 7.' href='/blog/category/drupal-7/'>Drupal 7</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal Planet.' href='/blog/category/drupal-planet/'>Drupal Planet</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal User Profile.' href='/blog/category/drupal-user-profile/'>Drupal User Profile</a>
    </div>
  


  
<div class="comments">
  <div id="disqus_thread"></div>
  <script>
  /**
  * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = 'https://thinkshout.com/blog/2016/04/customizing-menu-items-in-drupal-user-profile/';
    this.page.identifier = '/blog/2016/04/customizing-menu-items-in-drupal-user-profile';
    this.page.title = 'Customize Menu Items in Drupal User Profile'
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//thinkshout.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


</section>

<div class="pagination">
  
    <div class="previous">
      <a href="/blog/2016/04/splc-nominated-for-a-webby/"><span class="fa fa-caret-left"></span> <span>The Southern Poverty Law Center Gets Nominated for a Webby</span></a>
    </div>
  

  
    <div class="next">
      <a href="/blog/2016/04/syncing-up-with-drupal8-and-browsersync/"><span>Syncing Up with Drupal 8 and Browsersync</span> <span class="fa fa-caret-right"></span></a>
    </div>
  
</div>




  <div class="team-member-blog">
    <div class="container">
      <h4>Related Blog Posts</h4>
      <div class="row posts">
        
        
        
        
        
          <div class="post">
  <a href="/blog/2018/05/Space-for-Empathy/">
    <p class="post-date">05.24.2018</p>
    <h3 class="post-title">Space for Empathy</h3>
    <p class="post-short">How do we make space for empathy in our work and in our community? Jules takes us on a deep dive into what she learned at this year's DrupalCon</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/jules.jpg">
      <span class="byline-text">
        <strong>Jules Dickey</strong><br>
        <span class="position">Software Engineer</span>
      </span>
    </p>
  </a>
</div>

          
          
        
        
        
          <div class="post">
  <a href="/blog/2018/05/Making-GDPR-Preparations/">
    <p class="post-date">05.13.2018</p>
    <h3 class="post-title">Preparing for the GDPR</h3>
    <p class="post-short">The European Union’s General Data Protection Regulations go into effect May 25th. Here's how you need to prepare.</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/tauno.jpg">
      <span class="byline-text">
        <strong>Tauno Hogue</strong><br>
        <span class="position">Chief Technology Officer</span>
      </span>
    </p>
  </a>
</div>

          
          
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
          <div class="post">
  <a href="/blog/2018/01/Great-hoodie-mystery/">
    <p class="post-date">01.06.2018</p>
    <h3 class="post-title">The Great Hoodie Mystery</h3>
    <p class="post-short">Gabe takes what would otherwise be an inane office exchange and ties it back to data structures.</p>
    <p class="byline">
      
      <img class="team-photo" src="/assets/images/team/small/gabe.jpg">
      <span class="byline-text">
        <strong>Gabe Carleton-Barnes</strong><br>
        <span class="position">Director of Engineering</span>
      </span>
    </p>
  </a>
</div>

          
          
            
      </div>
    </div>
  </div>


  </div>

  <!-- Footer -->
  <div class="newsletter-block">
  <div class="container">
    <div class="newsletter-info">
      <h1>Get Our Email Newsletter</h1>
      <p>
        Cutting edge solutions, strategies, and updates from industry
        thought-leaders, delivered right to your inbox.
      </p>

      <form id="mc-embedded-subscribe-form" action="//thinkshout.us1.list-manage.com/subscribe/post?u=2ec82d6db8eeef3d5b33b762e&amp;id=e85720354e" method="post"  name="mc-embedded-subscribe-form" class="validate" target="_blank">
        <input type="email" placeholder="your email address" name="EMAIL" id="mce-EMAIL" required>
        <button type="submit">submit<i class="fa fa-caret-right"></i></button>
      </form>
    </div>
  </div>
</div>

  <footer>
  <div class="container">
  	<nav class="footer-menu">
      <ul class="main-menu-footer">
        
        <li>
          <a href="/work/">Our Work</a>
          
        </li>
        
        <li>
          <a href="/services/">Services</a>
          
            <ul class="footer-submenu">
            
              <li>
                <a href="/services/digital-strategy/">Digital Strategy</a>
              </li>
            
              <li>
                <a href="/services/design/">Design & UX</a>
              </li>
            
              <li>
                <a href="/services/digital-ecosystem/">Digital Ecosystem</a>
              </li>
            
              <li>
                <a href="/services/development/">Development</a>
              </li>
            
            </ul>
          
        </li>
        
        <li>
          <a href="/values/">Values</a>
          
        </li>
        
        <li>
          <a href="/team/">Team</a>
          
        </li>
        
        <li>
          <a href="/blog/">Blog</a>
          
        </li>
        
        <li>
          <a href="/contact/">Connect With Us</a>
          
        </li>
        
        <li>
          <a href="/careers/">Careers</a>
          
        </li>
        
      </ul>
  	</nav>

    <div class="bcorp-logo">
      
      
        
          <a href="https://www.bcorporation.net/community/thinkshout-inc" target="_blank">
            <img src="/assets/images/ts_redesign/bcorp.png" alt="bcorp logo" />
          </a>
        
      
    </div>

    <div class="footer-bottom">
      <div class="social-media">
        <ul>
          
            <li>
              <a href="http://www.facebook.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/facebook.svg" alt="facebook" />
              </a>
            </li>
          
            <li>
              <a href="http://www.twitter.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/twitter.svg" alt="twitter" />
              </a>
            </li>
          
        </ul>
      </div>
      <div class="copyright">
        &copy;2018 ThinkShout, Inc. ThinkShout and the ThinkShout logos are registered trademarks of ThinkShout, Inc.
        
        
          
            <a href="/privacy/">Privacy Policy</a>
          
        
      </div>
    </div>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
	<script src="/assets/js/jquery.waypoints.min.js"></script>
  <script src="/assets/js/jquery.matchHeight.js"></script>
  <script src="/assets/js/chosen.jquery.min.js"></script>
  <script src="/assets/js/script.js"></script>


  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9743130-1', 'auto');
    ga('send', 'pageview');

  </script>

</body>
</html>
