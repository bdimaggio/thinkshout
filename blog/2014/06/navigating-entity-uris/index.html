<!DOCTYPE html>
<!--[if IE 8]>         <html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <title>Navigating Entity URIs: A Practical Example | ThinkShout</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, minimum-scale=0.5 maximum-scale=1.0">
  <meta name="format-detection" content="telephone=no">

  
  <meta name="description" content="Find out how to wrestle proper URIs out of all sorts of stubborn entities.">

  <!-- Social Media Metatags -->
  
  <meta property="og:image" content="https://thinkshout.com/assets/images/ts_icon.jpg">
  <meta name="twitter:image" content="https://thinkshout.com/assets/images/ts_icon.jpg">
  

  
  <meta name="keywords" content="Drupal, Drupal Planet, Entity">

  <!-- Fonts -->
  <link rel="stylesheet" type="text/css" href="//cloud.typography.com/6630094/7238952/css/fonts.css" />
  <link rel="stylesheet" type="text/css" href="/assets/fonts/MyFontsWebfontsKit.css" />

  <link rel="shortcut icon" href="/assets/images/assets/favicon.ico" type="image/vnd.microsoft.icon" />

  <!-- Normalize CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css" media="screen" title="no title" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/assets/css/style.css?v=2018-06-11.11.49.44" />

  <!-- RSS feed -->
  <link rel="alternate" type="application/rss+xml" title="ThinkShout Feed" href="/rss.xml" />
</head>
<body class="blog-post">

  <!-- Header -->
  <header>
  <div class="container">
    <div class="header-logo">
      <a href="/">
        <img src="/assets/images/ts_redesign/ts-logo-full.png" alt="ThinkShout logo" />
      </a>
    </div>

    <a class="mobile-menu-icon">
      <div>
        <span aria-hidden="false">Menu</span>
      </div>
    </a>

		<nav>
			<ul class="main-menu">
        
          
            <li><a href="/work/">Our Work</a></li>
          
        
          
            <li><a href="/services/">Services</a></li>
          
        
          
            <li><a href="/values/">Values</a></li>
          
        
          
            <li><a href="/team/">Team</a></li>
          
        
          
            <li><a href="/blog/">Blog</a></li>
          
        
          
        
          
        
			</ul>
		</nav>
	</div>
</header>


  <!-- Main Content -->
  <div class="main-content">
      <div class="blog-header">
  

  <p><span class="date">06.27.2014</span>
  
  </p>

  <h1 class="post-title">Navigating Entity URIs: A Practical Example</h1>
  <p class="byline">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <img class="team-photo" src="/assets/images/team/small/gabe.jpg">
    
      <a class="team-name" href="/team/gabe/">Gabe Carleton-Barnes</a>
    <br>
      Director of Engineering
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </p>
</div>





<section class="body">
  <p>At ThinkShout, most of our modules are based around the Entity system. After all, like most developers, we are big abstraction nerds. Entities enable some rad abstraction in Drupal land: our <a href="https://www.drupal.org/project/registration">Registration module</a> lets you registration-enable any fieldable entity; the new version of <a href="https://www.drupal.org/project/mailchimp">MailChimp</a> lets you sync any fieldable entity with an email address with your MailChimp lists; and our <a href="https://www.drupal.org/project/salesforce">Salesforce module</a> lets you sync any entity with a Salesforce object.</p>

<p>Did you notice the little restriction I worked into my first two examples there? MailChimp and Registration are only for “fieldable entities”. There are a lot of reasons for this, but one of the conveniences of fieldability is that it gives you a natural place to add your entity-specific stuff, like a registration form or a MailChimp list signup dialogue: display it with field API!</p>

<p>Salesforce is different. It isn’t field-based. Instead, an individual “Salesforce Mapping” entity describes a synchronization relationship between a Drupal Entity Bundle (like a node content type of “Event”) and a Salesforce Object Type (like a “Campaign”): there’s no need for any entity-side configuration – or at least, there didn’t used to be.</p>

<p>Recently, we began implementing a suite of Salesforce sync administration tools to help resolve the inevitable issues that arise with two complex systems trying to pass data back and forth. One of the features of this tool is the ability to change the Salesforce Object that a particular Drupal entity is connected with (change a specific Event to map to a different Campaign). Another is to view the synchronization history for any Drupal entity.</p>

<p>We started out by implementing a central administrative UI to provide access to locate and edit all these Synchronization Object instances.</p>

<p>The UI is handy: searchable, filterable, sortable. Sometimes Drupal makes stuff really easy!</p>

<p><img src="/assets/images/blog/salesforce_sync_ui_admin.png" alt="salesforce_sync_ui_admin.png" /></p>

<p>Can we be real for a second, though? If I have an Event syncing with a Salesforce Campaign, and I want to look at the sync history, does it make sense for me to go to a special part of my site and track down that Event with some weird unique UI?</p>

<p>Hardly. Just put a tab on my Event Node, dude!</p>

<p>Great idea! Shouldn’t be too hard, right? We’ll just do a hook_menu, load up all our of Salesforce Mappings, and add a menu item to their Entity Bundles based on their URI:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="sd">/**
 * Implements hook_menu().
 */</span>
<span class="k">function</span> <span class="nf">salesforce_mapping_menu</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$items</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="c1">// Load our Salesforce mappings and loop through:</span>
  <span class="nv">$mappings</span> <span class="o">=</span> <span class="nx">salesforce_mapping_load</span><span class="p">();</span>

  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$mappings</span> <span class="k">as</span> <span class="nv">$mapping</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Create a dummy entity to load the URI:</span>
    <span class="nv">$entity</span> <span class="o">=</span> <span class="nx">entity_create</span><span class="p">(</span><span class="nv">$mapping</span><span class="o">-&gt;</span><span class="na">drupal_entity_type</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nv">$mapping</span><span class="o">-&gt;</span><span class="na">drupal_bundle</span><span class="p">));</span>
    <span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">();</span> <span class="c1">// Danger Will Robinson!</span>
    <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$uri</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nv">$type</span> <span class="o">.</span> <span class="s1">'/salesforce_activity'</span><span class="p">;</span>

    <span class="c1">// Figure out which argument has our entity ID in it:</span>
    <span class="nv">$entity_arg</span> <span class="o">=</span> <span class="nb">substr_count</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Use the URI and entity arg to generate a nice menu item:</span>
    <span class="nv">$items</span><span class="p">[</span><span class="nv">$path</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Salesforce activity'</span><span class="p">,</span>
      <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'View Salesforce activity for this entity.'</span><span class="p">,</span>
      <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nx">MENU_LOCAL_TASK</span><span class="p">,</span>
      <span class="s1">'page callback'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_object_view'</span><span class="p">,</span>
      <span class="s1">'page arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entity_arg</span><span class="p">,</span> <span class="nv">$mapping</span><span class="o">-&gt;</span><span class="na">drupal_entity_type</span><span class="p">),</span>
    <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nv">$items</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This worked great in development, but as soon as we tested on a production site, it exploded. Why? This line:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">();</span>
</code></pre></div></div>

<p>Sadly, this method doesn’t work for every Drupal Entity. Nodes, for example, and Commerce Orders, don’t respond to $entity-&gt;uri(). They like:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$uri</span> <span class="o">=</span> <span class="nx">entity_uri</span><span class="p">(</span><span class="nv">$entity</span><span class="p">)</span>
</code></pre></div></div>

<p>Grr. Ok, easy fix right?</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$uri</span> <span class="o">=</span> <span class="nb">method_exists</span><span class="p">(</span><span class="nv">$entity</span><span class="p">,</span> <span class="s1">'uri'</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">()</span> <span class="o">:</span> <span class="nx">entity_uri</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$entity</span><span class="p">);</span>
</code></pre></div></div>

<p>And yes, this is pretty good. But for some reason, our tab still wasn’t appearing on Commerce Orders. On closer inspection, this is the URI we were getting from our function call on Commerce Orders:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="k">array</span><span class="p">(</span>
  <span class="err">‘</span><span class="nx">options</span><span class="err">’</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
    <span class="err">‘</span><span class="nx">entity_type</span><span class="err">’</span> <span class="o">=&gt;</span> <span class="err">“</span><span class="nx">commerce_order</span><span class="err">”</span><span class="p">,</span>
    <span class="err">‘</span><span class="nx">entity</span><span class="err">’</span> <span class="o">=&gt;</span> <span class="p">{</span><span class="k">stdClass</span><span class="p">}</span>
  <span class="p">),</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Notice something missing? Yeah, there’s no ‘path’ index for the next line to use:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="nv">$path</span> <span class="o">=</span> <span class="nv">$uri</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nv">$type</span> <span class="o">.</span> <span class="s1">'/salesforce_activity'</span><span class="p">;</span>
</code></pre></div></div>

<p>Thanks for nuthin’, flagship example of how to use the Entity system! I’m sure the Commerce team has a good reason for leaving the ‘path’ piece of URIs empty on raw Entity objects: almost all Commerce Entities behave this way. But it’s not very helpful for us!</p>

<p>We could potentially resolve this by loading a random object and parsing its URI’s ‘path’ to extract an abstract version, or by offering a patch to Commerce. Perhaps the latter option would be ideal, but we decided a work-around would be more expeditious: we really don’t want to break Commerce on a live site.</p>

<p>Instead, we decided to override the entity data for the important entity types in a local module:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="sd">/**
 * Implements hook_entity_info_alter().
 */</span>
<span class="k">function</span> <span class="nf">my_module_entity_info_alter</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$entity_info</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Replace ‘commerce_order_ui_order_uri’</span>
  <span class="nv">$entity_info</span><span class="p">[</span><span class="s1">'commerce_order'</span><span class="p">][</span><span class="s1">'uri callback'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'my_module_uri_order'</span><span class="p">;</span>
<span class="p">}</span>

<span class="sd">/**
 * URI callback wrapper to ensure a proper ‘path’ index for Orders.
 */</span>
<span class="k">function</span> <span class="nf">my_module_uri_order</span><span class="p">(</span><span class="nv">$entity</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Call the original uri function and fix only if necessary:</span>
  <span class="nv">$uri</span> <span class="o">=</span> <span class="nx">commerce_order_ui_order_uri</span><span class="p">(</span><span class="nv">$entity</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">is_null</span><span class="p">(</span><span class="nv">$uri</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$uri</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="s1">'admin/commerce/orders/'</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nv">$uri</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This solves the issue for Orders. A similar technique can be used for any Entity Type that fails to offer a proper ‘path’ index for its URI.</p>

<p>The only entities left to deal with are those that don’t offer any URI at all: entities without a direct management interface. Field Collections are a common example. Fortunately, we started out with a Universal Admin UI: it seems reasonable to hang the Salesforce Object administration interface off this Admin page. Here’s the final, complete hook_menu implementation for our Salesforce Mapping UI:</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="sd">/**
 * Implements hook_menu().
 */</span>
<span class="k">function</span> <span class="nf">salesforce_mapping_menu</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$items</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

  <span class="nv">$items</span><span class="p">[</span><span class="s1">'admin/content/salesforce'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Salesforce Mapped Objects'</span><span class="p">,</span>
    <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'Manage mapped Salesforce objects.'</span><span class="p">,</span>
    <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nx">MENU_LOCAL_TASK</span><span class="p">,</span>
    <span class="s1">'page callback'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_object_overview_page'</span><span class="p">,</span>
    <span class="s1">'file'</span> <span class="o">=&gt;</span> <span class="s1">'includes/salesforce_mapping_object.admin.inc'</span><span class="p">,</span>
    <span class="s1">'access arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'view salesforce mapping object'</span><span class="p">),</span>
  <span class="p">);</span>

  <span class="c1">// Define SF activity local tasks for all mapped entities.</span>
  <span class="nv">$defaults</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'file'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_object.admin.inc'</span><span class="p">,</span>
    <span class="s1">'file path'</span> <span class="o">=&gt;</span> <span class="nx">drupal_get_path</span><span class="p">(</span><span class="s1">'module'</span><span class="p">,</span> <span class="s1">'salesforce_mapping'</span><span class="p">)</span> <span class="o">.</span> <span class="s1">'/includes'</span><span class="p">,</span>
  <span class="p">);</span>

  <span class="nv">$mappings</span> <span class="o">=</span> <span class="nx">salesforce_mapping_load</span><span class="p">();</span>
  <span class="nv">$mapped_entities</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$mappings</span> <span class="k">as</span> <span class="nv">$mapping</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// We grab the bundle now because it becomes inaccessible for some entities</span>
    <span class="c1">// after it is put into the loop below:</span>
    <span class="nv">$mapped_entities</span><span class="p">[</span><span class="nv">$mapping</span><span class="o">-&gt;</span><span class="na">drupal_entity_type</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$mapping</span><span class="o">-&gt;</span><span class="na">drupal_bundle</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">foreach</span> <span class="p">(</span><span class="nv">$mapped_entities</span> <span class="k">as</span> <span class="nv">$type</span> <span class="o">=&gt;</span> <span class="nv">$bundle</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$entity</span> <span class="o">=</span> <span class="nx">entity_create</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span><span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nv">$bundle</span><span class="p">));</span>
    <span class="nv">$uri</span> <span class="o">=</span> <span class="nb">method_exists</span><span class="p">(</span><span class="nv">$entity</span><span class="p">,</span> <span class="s1">'uri'</span><span class="p">)</span> <span class="o">?</span> <span class="nv">$entity</span><span class="o">-&gt;</span><span class="na">uri</span><span class="p">()</span> <span class="o">:</span> <span class="nx">entity_uri</span><span class="p">(</span><span class="nv">$type</span><span class="p">,</span> <span class="nv">$entity</span><span class="p">);</span>
    <span class="c1">// For entities without their own menu items, we hang the UI off the universal</span>
    <span class="c1">// Salesforce object admin page:</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$uri</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$path</span> <span class="o">=</span> <span class="s1">'admin/content/salesforce/'</span> <span class="o">.</span> <span class="nv">$type</span> <span class="o">.</span> <span class="s1">'/%'</span> <span class="o">.</span> <span class="nv">$type</span> <span class="o">.</span> <span class="s1">'/salesforce_activity'</span><span class="p">;</span>
      <span class="nv">$menu_type</span> <span class="o">=</span> <span class="nx">MENU_NORMAL_ITEM</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
      <span class="nv">$path</span> <span class="o">=</span> <span class="nv">$uri</span><span class="p">[</span><span class="s1">'path'</span><span class="p">]</span> <span class="o">.</span> <span class="s1">'%'</span> <span class="o">.</span> <span class="nv">$type</span> <span class="o">.</span> <span class="s1">'/salesforce_activity'</span><span class="p">;</span>
      <span class="nv">$menu_type</span> <span class="o">=</span> <span class="nx">MENU_LOCAL_TASK</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nv">$entity_arg</span> <span class="o">=</span> <span class="nb">substr_count</span><span class="p">(</span><span class="nv">$path</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="nv">$items</span><span class="p">[</span><span class="nv">$path</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Salesforce activity'</span><span class="p">,</span>
      <span class="s1">'description'</span> <span class="o">=&gt;</span> <span class="s1">'View Salesforce activity for this entity.'</span><span class="p">,</span>
      <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nv">$menu_type</span><span class="p">,</span>
      <span class="s1">'page callback'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_object_view'</span><span class="p">,</span>
      <span class="s1">'page arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entity_arg</span><span class="p">,</span> <span class="nv">$type</span><span class="p">),</span>
      <span class="s1">'access callback'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_entity_mapping_accessible'</span><span class="p">,</span>
      <span class="s1">'access arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'view'</span><span class="p">,</span> <span class="nv">$entity_arg</span><span class="p">,</span> <span class="nv">$type</span><span class="p">),</span>
    <span class="p">);</span>
    <span class="nv">$items</span><span class="p">[</span><span class="nv">$path</span> <span class="o">.</span> <span class="s1">'/view'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'View'</span><span class="p">,</span>
      <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nx">MENU_DEFAULT_LOCAL_TASK</span><span class="p">,</span>
      <span class="s1">'weight'</span> <span class="o">=&gt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span>
    <span class="p">);</span>
    <span class="nv">$items</span><span class="p">[</span><span class="nv">$path</span> <span class="o">.</span> <span class="s1">'/edit'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'page callback'</span> <span class="o">=&gt;</span> <span class="s1">'salesforce_mapping_object_edit'</span><span class="p">,</span>
      <span class="s1">'page arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="nv">$entity_arg</span><span class="p">,</span> <span class="nv">$type</span><span class="p">),</span>
      <span class="s1">'access arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'edit salesforce mapping object'</span><span class="p">),</span>
      <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Edit'</span><span class="p">,</span>
      <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nx">MENU_LOCAL_TASK</span><span class="p">,</span>
      <span class="s1">'context'</span> <span class="o">=&gt;</span> <span class="nx">MENU_CONTEXT_PAGE</span> <span class="o">|</span> <span class="nx">MENU_CONTEXT_INLINE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">+</span> <span class="nv">$defaults</span><span class="p">;</span>
    <span class="nv">$items</span><span class="p">[</span><span class="nv">$path</span> <span class="o">.</span> <span class="s1">'/delete'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'page callback'</span> <span class="o">=&gt;</span> <span class="s1">'drupal_get_form'</span><span class="p">,</span>
      <span class="s1">'page arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'salesforce_mapping_object_delete_form'</span><span class="p">,</span> <span class="nv">$entity_arg</span><span class="p">,</span> <span class="nv">$type</span><span class="p">),</span>
      <span class="s1">'access arguments'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">'delete salesforce mapping object'</span><span class="p">),</span>
      <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Delete'</span><span class="p">,</span>
      <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="nx">MENU_LOCAL_TASK</span><span class="p">,</span>
      <span class="s1">'context'</span> <span class="o">=&gt;</span> <span class="nx">MENU_CONTEXT_INLINE</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">+</span> <span class="nv">$defaults</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nv">$items</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Now we can find what we need from two natural directions: by thinking about Salesforce Sync Objects or just by thinking about the entity we want to deal with. The inconsistent responsiveness of Drupal Entities to the uri() request is frustrating, but not impossible to work around. Hopefully, you find this article helpful – and if you maintain a module that creates its own entities, please test out the uri() function before your next release!</p>


  
    
      <div class="blog-cta">
        <div class="text">
          <h3>Get In Touch</h3>
          <p><p>Questions? Comments? We want to know! Drop us a line and let’s start talking.</p>
</p>
          <a href="https://thinkshout.com/contact/" class="uppercase-link">Learn More<i class="fa fa-caret-right"></i></a>
        </div>

        
        <div class="image">
          <img src="/assets/images/ts_redesign/cta/portland-waterfront-cta.jpg" alt="Get In Touch">
        </div>
        
      </div>
      

  
    <div class="tags">
      <span class="tag-label">Tags:</span>
      <a class='tag' rel='tag category' title='View all posts tagged Drupal.' href='/blog/category/drupal/'>Drupal</a> <a class='tag' rel='tag category' title='View all posts tagged Drupal Planet.' href='/blog/category/drupal-planet/'>Drupal Planet</a> <a class='tag' rel='tag category' title='View all posts tagged Entity.' href='/blog/category/entity/'>Entity</a>
    </div>
  


  
<div class="comments">
  <div id="disqus_thread"></div>
  <script>
  /**
  * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
  */
  var disqus_config = function () {
    this.page.url = 'https://thinkshout.com/blog/2014/06/navigating-entity-uris/';
    this.page.identifier = '/blog/2014/06/navigating-entity-uris';
    this.page.title = 'Navigating Entity URIs: A Practical Example'
  };
  (function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');

  s.src = '//thinkshout.disqus.com/embed.js';

  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


</section>

<div class="pagination">
  
    <div class="previous">
      <a href="/blog/2014/06/creating-an-infinite-scroll-masonry-block-without-views/"><span class="fa fa-caret-left"></span> <span>Creating an Infinite Scroll Masonry Block Without Views</span></a>
    </div>
  

  
    <div class="next">
      <a href="/blog/2014/07/desire-paths-part-ii/"><span>Desire Paths, Part 2: Your Website is Telling You a Story</span> <span class="fa fa-caret-right"></span></a>
    </div>
  
</div>





  </div>

  <!-- Footer -->
  <div class="newsletter-block">
  <div class="container">
    <div class="newsletter-info">
      <h1>Get Our Email Newsletter</h1>
      <p>
        Cutting edge solutions, strategies, and updates from industry
        thought-leaders, delivered right to your inbox.
      </p>

      <form id="mc-embedded-subscribe-form" action="//thinkshout.us1.list-manage.com/subscribe/post?u=2ec82d6db8eeef3d5b33b762e&amp;id=e85720354e" method="post"  name="mc-embedded-subscribe-form" class="validate" target="_blank">
        <input type="email" placeholder="your email address" name="EMAIL" id="mce-EMAIL" required>
        <button type="submit">submit<i class="fa fa-caret-right"></i></button>
      </form>
    </div>
  </div>
</div>

  <footer>
  <div class="container">
  	<nav class="footer-menu">
      <ul class="main-menu-footer">
        
        <li>
          <a href="/work/">Our Work</a>
          
        </li>
        
        <li>
          <a href="/services/">Services</a>
          
            <ul class="footer-submenu">
            
              <li>
                <a href="/services/digital-strategy/">Digital Strategy</a>
              </li>
            
              <li>
                <a href="/services/design/">Design & UX</a>
              </li>
            
              <li>
                <a href="/services/digital-ecosystem/">Digital Ecosystem</a>
              </li>
            
              <li>
                <a href="/services/development/">Development</a>
              </li>
            
            </ul>
          
        </li>
        
        <li>
          <a href="/values/">Values</a>
          
        </li>
        
        <li>
          <a href="/team/">Team</a>
          
        </li>
        
        <li>
          <a href="/blog/">Blog</a>
          
        </li>
        
        <li>
          <a href="/contact/">Connect With Us</a>
          
        </li>
        
        <li>
          <a href="/careers/">Careers</a>
          
        </li>
        
      </ul>
  	</nav>

    <div class="bcorp-logo">
      
      
        
          <a href="https://www.bcorporation.net/community/thinkshout-inc" target="_blank">
            <img src="/assets/images/ts_redesign/bcorp.png" alt="bcorp logo" />
          </a>
        
      
    </div>

    <div class="footer-bottom">
      <div class="social-media">
        <ul>
          
            <li>
              <a href="http://www.facebook.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/facebook.svg" alt="facebook" />
              </a>
            </li>
          
            <li>
              <a href="http://www.twitter.com/ThinkShout" target="_blank">
                <img src="/assets/images/ts_redesign/twitter.svg" alt="twitter" />
              </a>
            </li>
          
        </ul>
      </div>
      <div class="copyright">
        &copy;2018 ThinkShout, Inc. ThinkShout and the ThinkShout logos are registered trademarks of ThinkShout, Inc.
        
        
          
            <a href="/privacy/">Privacy Policy</a>
          
        
      </div>
    </div>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
	<script src="/assets/js/jquery.waypoints.min.js"></script>
  <script src="/assets/js/jquery.matchHeight.js"></script>
  <script src="/assets/js/chosen.jquery.min.js"></script>
  <script src="/assets/js/script.js"></script>


  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9743130-1', 'auto');
    ga('send', 'pageview');

  </script>

</body>
</html>
