<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ThinkShout</title>
    <description>ThinkShout - We provide web strategy and open source technology to forward-thinking organizations.</description>
    <link>https://thinkshout.com</link>
    <atom:link href="https://thinkshout.com/blog/category/apache-solr/rss.xml/rss.xml" rel="self" type="application/rss+xml"/>

    
      <item>
  <title>RedHen in the Wild: Mission Investors Exchange</title>
  <description>
    <![CDATA[<p>When Seattle based PRI Makers Network and Harvard based More for Mission decided to merge and rebrand as <a href="http://www.missioninvestors.org">Mission Investors Exchange</a>, ThinkShout was engaged to re-invent their combined website on Drupal 7 and deploy a tightly integrated constituent relationship management (CRM) system.</p>

<h3 id="background">Background</h3>

<p>With a growing roster of over 260 of the most influential foundations and non-profits in the U.S. and Canada, Mission Investors Exchange and ThinkShout worked closely to create a feature set that enables philanthropic innovators to exchange ideas, tools, and experiences to increase the impact of their capital. Critical features of the site include: responsive design for mobile users, an extensive resource library and investment database utilizing Apache Solr faceted search including attachment indexing and customized result displays, javascript glossary for defining terms within content, <a href="http://www.redhencrm.com/">RedHen CRM</a> for membership management, and tight integration between CRM data and site content.</p>

<h3 id="responsive-design">Responsive design</h3>

<p>The responsive theme was developed using <a href="http://drupal.org/project/omega">Omega</a> and <a href="http://lesscss.org">LESS</a>.</p>

<p><img src="https://dl.dropbox.com/s/6djwng0wihxha1d/mie_mobile_desktop.png?dl=1" alt="Desktop and mobile layouts" /></p>

<h3 id="sprucing-up-apache-solr-search">Sprucing up Apache Solr search</h3>

<p>One of the greatest online assets of Mission Investors Exchange is their repository of articles, reports, templates, and investment records. Apache Solr was selected as the search server to allow high performance faceted searching and attachment indexing. To better customize the search experience, three search interfaces were built: sitewide search, tool/resource search, and investment search. The default Drupal/Apache Solr search experience leaves a bit to be desired when it comes to user experience, so several customizations were made across all three search interfaces.</p>

<ul>
  <li>Render teasers instead of only showing the solr result snippet. When a keyword search is done we replace the body extract with the solr snippet that includes the highlighted keywords while maintaining all the other teaser fields.</li>
</ul>

<p><img src="https://dl.dropbox.com/s/ulq2alurfgz3n06/MIE-search-teasers.png?dl=1" alt="Improved Solr search teasers" /></p>

<ul>
  <li>Duplicate results for attached files and the content item they are associated with is confusing to users. Indexing attachments with the content item they are associated with is possible via <a href="http://drupal.org/node/561862#comment-6246408">a patch</a> to the <a href="http://drupal.org/project/apachesolr_attachments">Apache Solr Attachments</a> module.</li>
  <li><a href="http://wiki.apache.org/solr/StatsComponent">Solr’s StatsComponent</a> is utilized to provide a lightweight sum of investment amounts.</li>
</ul>

<p><img src="https://www.dropbox.com/s/dfh12gecnu15mlq/MIE-investments.png?dl=1" alt="Summary statistics with Solr" /></p>

<ul>
  <li>Investments from a search can be exported by feeding the selected facet and keyword values to a <a href="http://drupal.org/project/views_data_export">Views Data Export</a> View.</li>
</ul>

<h3 id="defining-the-lingo-in-context">Defining the lingo in context</h3>

<p>Educating the public and member foundations about the field of mission investing is made more challenging by the prevalance of technical terms and concepts. To address this, an inline glossary feature was developed that allows users to click a button to highlight defined terms within a page then click on those terms to read a definition of the term. Site content editors are able to easily add and update glossary terms as needed.</p>

<p><img src="https://www.dropbox.com/s/j1l7gag1c9vrw0j/MIE-glossary-active.png?dl=1" alt="Glossary feature" /></p>

<h3 id="redhen-crm---integration-not-needed">RedHen CRM - Integration not needed</h3>

<p>With a plethora of CRM solutions on the market, selecting the best solution for a given use case can be daunting. For Mission Investors Exchange, tight integration with their Drupal site, simple membership management, and room for growth were some of the key criteria used to evaluate potential solutions. Because RedHen is a native Drupal 7 CRM, no integration is necessary to connect it to a Drupal powered site.</p>

<ul>
  <li>Customized RedHen interface using Views, Views Data Export, and Views Bulk Operations to quickly tailor the management screens to staff needs.</li>
</ul>

<p><img src="https://www.dropbox.com/s/yo7kwt3njyjpv91/MIE-orgs-manage.png?dl=1" alt="Staff management of Organizations" /></p>

<ul>
  <li>Site content can be related to RedHen organization records allowing for a rich display of tools, news, events, and investments associated with a given member.</li>
  <li>Multiple member levels can be tracked along with data about payment amounts and dates for each organization. Organizations with active memberships are automatically included in the membership directory.</li>
</ul>

<p><img src="https://www.dropbox.com/s/2wtg3w5s4nyadtv/MIE-directory.png?dl=1" alt="Member directory from RedHen data" /></p>

<ul>
  <li>Permissions based on an organization’s membership automatically flow down to contacts and their user accounts that have active associations with the member organization. Instant access control.</li>
  <li>Migrating member data from a Drupal 6 based site with a flat data structure to RedHen’s highly flexible structure required the development of several custom migration classes to handle relations and RedHen entities.</li>
</ul>

<h3 id="coming-soon">Coming soon…</h3>

<p>One of the great strengths of using a native Drupal CRM solution is being able to base site business logic on CRM data. To this end, paid event registration using <a href="http://drupal.org/project/registration">Registration</a> and <a href="http://drupal.org/project/commerce_registration">Commerce Registration</a> with support for pricing based on membership levels is currently in development. Other planned enhancements focus on improving the content discovery process for Mission Investors Exchange members.</p>
]]>
  </description>
  <pubDate>Tue, 18 Sep 2012 00:00:00 -0400</pubDate>
  <link>https://thinkshout.com/blog/2012/09/tauno/redhen-wild-mission-investors-exchange/</link>
  <guid isPermaLink="true">https://thinkshout.com/blog/2012/09/tauno/redhen-wild-mission-investors-exchange/</guid>
</item>

    
      <item>
  <title>A mime is a terrible thing to waste</title>
  <description>
    <![CDATA[<p>One of the first projects I am working on here at ThinkShout requires full-text search of file attachments. This is accomplished using the <a href="http://drupal.org/project/apachesolr_attachments">Apache Solr Attachments</a> module. We’re also using the <a href="http://drupal.org/project/facetapi">Facet API</a> module to allow the users to filter their searches based on certain criteria or “facets”.  The Facet API module provides several useful facets out-of-the-box, such as a filter by Author and by Content Type. One facet that we wanted to enable for the client’s users is the ability to filter on the type of file(s) attached to a node. The Facet API module allows a developer to create filter blocks based on fields indexed by <a href="http://drupal.org/project/apachesolr">Apache Solr Search Integration</a> (or in this case using Acquia Search with <a href="http://drupal.org/project/acquia_connector">Acquia Network Connector</a>).  The Apache Solr Attachments module provides the mimetype of the attached file as a piece of indexed data. Creating a facet is implemented with hook_facetapi_facet_info. Following the examples implemented for the default facets that ship with the module, a facet for mime type can be created by searching on the ss_filemime index field.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function MYMODULE_facetapi_facet_info($searcher_info) {
  $facets = array();
  
  $facets['mime'] = array(
     'label' =&gt; t('Mime Type'),
     'description' =&gt; t('Filter by mime type.'),
     //indexed field from solr 
     'field' =&gt; 'ss_filemime',
     'map callback' =&gt; 'MYMODULE_map_mime',
     'facet mincount allowed' =&gt; TRUE,
     'dependency plugins' =&gt; array('bundle', 'role'),
   );
   
  return $facets;
}
</code></pre></div></div>
<p>This can be done for any indexed field. Once the facet is implemented it can then be enabled through the admin screen for facets, which then, in turn, provides a block for that facet. The only issue we then faced was translating the presented mime types in a human-readable format. This is done with the map callback. The map callback is a function that takes the values of the index field that can then be associated with other content. In the case of the default Author facet the uid of the content is returned. The map callback for that facet is associated with the Drupal user and returns the username. For file mime types, a simple array of mime type to readable file type was used, so that, for example, “application/vnd.ms-excel” is just returned as “Excel”.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>function MYMODULE_map_mime(array $values) {
  $map = $values;
  $mimes = array(
    'application/pdf'=&gt;'PDF',
    'application/msword'=&gt;'Word Document',
    'application/vnd.ms-excel'=&gt;'Excel',
  );
  $map = array();
  foreach ($mimes  as $type =&gt; $name) {
    $map[$type] = $name;
  }
  return $map;
}
</code></pre></div></div>
]]>
  </description>
  <pubDate>Fri, 16 Sep 2011 00:00:00 -0400</pubDate>
  <link>https://thinkshout.com/blog/2011/09/brandon/mime-terrible-thing-waste/</link>
  <guid isPermaLink="true">https://thinkshout.com/blog/2011/09/brandon/mime-terrible-thing-waste/</guid>
</item>

    

  </channel>
</rss>
